import{e as g,m,R as p}from"./monaco-CQMcmKfR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();self.MonacoEnvironment={getWorker:function(d,e){const t=(s,n)=>new Worker(self.MonacoEnvironment.getWorkerUrl(s,n),{name:n,type:"module"});switch(e){case"json":return t("/monaco-editor/esm/vs/language/json/json.worker?worker",e);case"css":case"scss":case"less":return t("/monaco-editor/esm/vs/language/css/css.worker?worker",e);case"html":case"handlebars":case"razor":return t("/monaco-editor/esm/vs/language/html/html.worker?worker",e);case"typescript":case"javascript":return t("/monaco-editor/esm/vs/language/typescript/ts.worker?worker",e);default:return t("/monaco-editor/esm/vs/editor/editor.worker?worker",e)}}};async function f(){return await new Promise(d=>setTimeout(d,100)),g.defineTheme("regex-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#252525"}}),g.defineTheme("regex-light",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#ffffff"}}),m}function E(d,e={}){if(!d)return console.error("Container for Monaco Editor not found!"),null;const t={value:`The quick brown fox jumps over the lazy dog.
Pack my box with five dozen liquor jugs.
How vexingly quick daft zebras jump!`,language:"plaintext",theme:"regex-dark",fontSize:14,fontFamily:'"JetBrains Mono", "Courier New", monospace',minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",lineNumbers:"on",renderWhitespace:"selection",automaticLayout:!0,padding:{top:10,bottom:10},folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:3,renderLineHighlight:"all",scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}};try{const s=g.create(d,{...t,...e});return console.log("Monaco Editor created successfully"),s}catch(s){return console.error("Error creating Monaco Editor:",s),null}}class x{constructor(){this.lastRegex=null,this.lastFlags=null}execute(e,t,s,n="javascript"){try{const i=this.createRegex(e,t,n);return{matches:this.findMatches(i,s,t.includes("g")),pattern:e,flags:t,testString:s,flavor:n}}catch(i){throw new Error(`Regex Error: ${i.message}`)}}createRegex(e,t,s){let n=e,i=t;switch(s){case"pcre":n=this.convertPCREToJS(e);break;case"python":n=this.convertPythonToJS(e);break;case"golang":n=this.convertGoToJS(e);break}try{return new RegExp(n,i)}catch(r){throw new Error(`Invalid regular expression: ${r.message}`)}}findMatches(e,t,s){const n=[];if(s){let i;const r=new RegExp(e.source,e.flags);for(;(i=r.exec(t))!==null;){if(i.index===r.lastIndex&&r.lastIndex++,i.length>1){i.groups={};for(let o=1;o<i.length;o++)i.groups[o]=i[o]}n.push(i)}}else{const i=e.exec(t);if(i){if(i.length>1){i.groups={};for(let r=1;r<i.length;r++)i.groups[r]=i[r]}n.push(i)}}return n}substitute(e,t,s,n){try{const i=new RegExp(e,t),r=n.replace(/\$(\d+)/g,(o,a)=>`$${a}`).replace(/\$\{(\d+)\}/g,(o,a)=>`$${a}`).replace(/\$&/g,"$&").replace(/\$`/g,"$`").replace(/\$'/g,"$'");return s.replace(i,r)}catch{return s}}explain(e,t){const s=[];let n=0;for(;n<e.length;){const i=e[n];switch(i){case"^":s.push(this.createExplanation("^","Asserts position at start of string or line")),n++;break;case"$":s.push(this.createExplanation("$","Asserts position at end of string or line")),n++;break;case".":s.push(this.createExplanation(".","Matches any character (except newline unless s flag is set)")),n++;break;case"*":s.push(this.createExplanation("*","Matches previous token 0 or more times (greedy)")),n++;break;case"+":s.push(this.createExplanation("+","Matches previous token 1 or more times (greedy)")),n++;break;case"?":n>0&&(e[n-1]==="*"||e[n-1]==="+"||e[n-1]==="?")?s.push(this.createExplanation("?","Makes previous quantifier lazy (non-greedy)")):s.push(this.createExplanation("?","Matches previous token 0 or 1 time")),n++;break;case"\\":if(n+1<e.length){const l=e[n+1],h="\\"+l;s.push(this.createExplanation(h,this.getEscapeExplanation(l))),n+=2}else n++;break;case"[":const r=e.indexOf("]",n);if(r!==-1){const l=e.substring(n,r+1);s.push(this.createExplanation(l,this.getCharClassExplanation(l))),n=r+1}else n++;break;case"(":let o=1,a=n+1;for(;a<e.length&&o>0;)e[a]==="("&&e[a-1]!=="\\"&&o++,e[a]===")"&&e[a-1]!=="\\"&&o--,a++;const c=e.substring(n,a);s.push(this.createExplanation(c,this.getGroupExplanation(c))),n=a;break;case"|":s.push(this.createExplanation("|","Alternation (OR operator)")),n++;break;case"{":const u=e.indexOf("}",n);if(u!==-1){const l=e.substring(n,u+1);s.push(this.createExplanation(l,this.getQuantifierExplanation(l))),n=u+1}else n++;break;default:s.push(this.createExplanation(i,`Matches the character "${i}" literally`)),n++}}return t&&s.push(this.createExplanation(`Flags: ${t}`,this.getFlagsExplanation(t))),this.formatExplanation(s)}createExplanation(e,t){return{token:e,description:t}}getEscapeExplanation(e){return{d:"Matches any digit character [0-9]",D:"Matches any non-digit character",w:"Matches any word character [a-zA-Z0-9_]",W:"Matches any non-word character",s:"Matches any whitespace character",S:"Matches any non-whitespace character",b:"Matches a word boundary",B:"Matches a non-word boundary",n:"Matches a newline character",r:"Matches a carriage return",t:"Matches a tab character",v:"Matches a vertical tab character",f:"Matches a form feed character",0:"Matches a null character","\\":"Matches a backslash literally"}[e]||`Escapes the character "${e}"`}getCharClassExplanation(e){return e.startsWith("[^")?`Matches any character NOT in the set ${e.substring(2,e.length-1)}`:`Matches any character in the set ${e.substring(1,e.length-1)}`}getGroupExplanation(e){if(e.startsWith("(?:"))return"Non-capturing group";if(e.startsWith("(?="))return"Positive lookahead assertion";if(e.startsWith("(?!"))return"Negative lookahead assertion";if(e.startsWith("(?<="))return"Positive lookbehind assertion";if(e.startsWith("(?<!"))return"Negative lookbehind assertion";if(e.startsWith("(?<")){const t=e.indexOf(">");return`Named capturing group "${e.substring(3,t)}"`}else return"Capturing group"}getQuantifierExplanation(e){const t=e.substring(1,e.length-1);if(t.includes(",")){const[s,n]=t.split(",");return n?`Matches previous token between ${s} and ${n} times`:`Matches previous token ${s} or more times`}else return`Matches previous token exactly ${t} times`}getFlagsExplanation(e){const t=[];return e.includes("g")&&t.push("global (find all matches)"),e.includes("i")&&t.push("case insensitive"),e.includes("m")&&t.push("multiline (^ and $ match line breaks)"),e.includes("s")&&t.push("single line (. matches newlines)"),e.includes("u")&&t.push("unicode"),e.includes("y")&&t.push("sticky"),t.join(", ")}formatExplanation(e){let t='<div class="regex-explanation">';return e.forEach(s=>{t+=`
                <div class="explanation-part">
                    <code>${this.escapeHtml(s.token)}</code>
                    <span>${s.description}</span>
                </div>
            `}),t+="</div>",t}convertPCREToJS(e){return e.replace(/\\A/g,"^").replace(/\\Z/g,"$").replace(/\\z/g,"$")}convertPythonToJS(e){return e}convertGoToJS(e){return e}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}}class v{constructor(){this.testStringEditor=null,this.regexEngine=new x,this.currentMatches=[],this.currentDecorations=[],this.init()}async init(){try{console.log("Initializing Regex App..."),await f(),console.log("Monaco environment setup complete"),await this.initTestStringEditor(),console.log("Test string editor initialized"),this.attachEventListeners(),this.updateUI(),this.loadSavedState(),console.log("App initialization complete")}catch(e){console.error("Error during initialization:",e)}}async initTestStringEditor(){const e=document.getElementById("test-string-editor");if(!e){console.error("Test string editor container not found!");return}if(e.style.height="300px",e.style.position="relative",this.testStringEditor=E(e,{value:`The quick brown fox jumps over the lazy dog.
Pack my box with five dozen liquor jugs.
How vexingly quick daft zebras jump!`,language:"plaintext",theme:"regex-dark"}),!this.testStringEditor){console.error("Failed to create test string editor"),this.initFallbackEditor();return}this.testStringEditor.onDidChangeModelContent(()=>{this.processRegex()}),this.testStringEditor.onDidChangeCursorPosition(t=>{document.getElementById("cursor-position").textContent=`Zeile ${t.position.lineNumber}, Spalte ${t.position.column}`})}initFallbackEditor(){console.log("Initializing fallback editor...");const e=document.getElementById("test-string-editor");e.innerHTML=`
            <textarea 
                id="fallback-textarea" 
                style="width:100%;height:100%;background:#252525;color:#e0e0e0;border:none;padding:10px;font-family:monospace;font-size:14px;resize:none;"
            >The quick brown fox jumps over the lazy dog.
Pack my box with five dozen liquor jugs.
How vexingly quick daft zebras jump!</textarea>
        `;const t=document.getElementById("fallback-textarea");t.addEventListener("input",()=>this.processRegex()),this.testStringEditor={getValue:()=>t.value,setValue:s=>{t.value=s},deltaDecorations:()=>[]}}attachEventListeners(){const e=document.getElementById("regex-input"),t=document.getElementById("regex-flags");e&&e.addEventListener("input",()=>this.processRegex()),t&&t.addEventListener("input",()=>this.updateFlagsAndProcess()),document.querySelectorAll(".flag-option input").forEach(c=>{c.addEventListener("change",()=>this.updateFlagsFromCheckboxes())}),document.querySelectorAll(".tab-btn").forEach(c=>{c.addEventListener("click",u=>{u.preventDefault();const l=u.currentTarget.dataset.tab;this.switchTab(l)})});const s=document.getElementById("theme-toggle");s&&s.addEventListener("click",()=>this.toggleTheme());const n=document.getElementById("settings-btn");n&&n.addEventListener("click",()=>{alert("Einstellungen werden in einer zukünftigen Version verfügbar sein.")});const i=document.getElementById("clear-test");i&&i.addEventListener("click",()=>{this.testStringEditor&&this.testStringEditor.setValue?this.testStringEditor.setValue(""):this.testStringEditor&&this.testStringEditor.getValue&&(document.getElementById("fallback-textarea").value="")});const r=document.getElementById("enable-substitution");r&&r.addEventListener("change",c=>{const u=document.getElementById("substitution-container");u&&(u.style.display=c.target.checked?"block":"none"),c.target.checked&&this.processRegex()});const o=document.getElementById("substitution-input");o&&o.addEventListener("input",()=>{document.getElementById("enable-substitution").checked&&this.processRegex()});const a=document.getElementById("regex-flavor");a&&a.addEventListener("change",()=>this.processRegex()),document.addEventListener("keydown",c=>{(c.ctrlKey||c.metaKey)&&c.key==="s"&&(c.preventDefault(),this.saveState())})}updateFlagsFromCheckboxes(){const e=[];document.querySelectorAll(".flag-option input:checked").forEach(t=>{e.push(t.dataset.flag)}),document.getElementById("regex-flags").value=e.join(""),this.processRegex()}updateFlagsAndProcess(){const t=document.getElementById("regex-flags").value.split("");document.querySelectorAll(".flag-option input").forEach(s=>{s.checked=t.includes(s.dataset.flag)}),this.processRegex()}processRegex(){const e=document.getElementById("regex-input").value,t=document.getElementById("regex-flags").value,s=this.testStringEditor?this.testStringEditor.getValue():"",n=document.getElementById("regex-flavor").value;if(!e){this.clearResults();return}const i=performance.now();try{const r=this.regexEngine.execute(e,t,s,n);if(document.getElementById("enable-substitution").checked){const a=document.getElementById("substitution-input").value;r.substitution=this.regexEngine.substitute(e,t,s,a)}const o=(performance.now()-i).toFixed(2);this.displayResults(r,o),this.highlightMatches(r.matches),this.generateExplanation(e,t),this.setStatus(`${r.matches.length} Treffer gefunden`,"success")}catch(r){this.setStatus(`Fehler: ${r.message}`,"error"),this.clearResults()}}highlightMatches(e){if(!this.testStringEditor||!this.testStringEditor.deltaDecorations)return;const t=this.testStringEditor.getModel();if(!t)return;const s=e.map(n=>{const i=t.getPositionAt(n.index),r=t.getPositionAt(n.index+n[0].length);return{range:new p(i.lineNumber,i.column,r.lineNumber,r.column),options:{className:"regex-match-highlight",hoverMessage:{value:`Match: ${n[0]}`}}}});this.currentDecorations=this.testStringEditor.deltaDecorations(this.currentDecorations,s)}displayResults(e,t){document.getElementById("match-count").textContent=e.matches.length,document.getElementById("exec-time").textContent=t;const s=document.getElementById("matches-list");if(s.innerHTML="",e.matches.length===0){s.innerHTML='<div class="no-matches">Keine Treffer gefunden</div>';return}if(e.matches.forEach((n,i)=>{const r=document.createElement("div");r.className="match-item",r.innerHTML=`
                <div class="match-header">
                    <span class="match-number">Match ${i+1}</span>
                    <span class="match-position">[${n.index}-${n.index+n[0].length}]</span>
                </div>
                <div class="match-content">
                    <code>${this.escapeHtml(n[0])}</code>
                </div>
                ${n.groups?this.renderGroups(n.groups):""}
            `,s.appendChild(r),r.addEventListener("click",()=>this.showMatchDetails(n,i))}),e.substitution!==void 0){const n=document.createElement("div");n.className="substitution-result",n.innerHTML=`
                <h4><i class="fas fa-exchange-alt"></i> Substitution Result:</h4>
                <pre>${this.escapeHtml(e.substitution)}</pre>
            `,s.appendChild(n)}}renderGroups(e){if(!e||Object.keys(e).length===0)return"";let t='<div class="match-groups">';for(const[s,n]of Object.entries(e))n!==void 0&&(t+=`
                    <div class="group-item">
                        <span class="group-name">Group ${s}:</span>
                        <code>${this.escapeHtml(n)}</code>
                    </div>
                `);return t+="</div>",t}generateExplanation(e,t){const s=document.getElementById("regex-explanation");try{const n=this.regexEngine.explain(e,t);s.innerHTML=n}catch(n){s.innerHTML=`<div class="error">Erklärung konnte nicht generiert werden: ${n.message}</div>`}}showMatchDetails(e,t){this.switchTab("details");const s=document.getElementById("match-details");let n=`
            <h3>Match ${t+1} Details</h3>
            <div class="detail-item">
                <strong>Full Match:</strong>
                <code>${this.escapeHtml(e[0])}</code>
            </div>
            <div class="detail-item">
                <strong>Position:</strong>
                <span>${e.index} - ${e.index+e[0].length}</span>
            </div>
        `;if(e.length>1){n+="<h4>Capturing Groups:</h4>";for(let i=1;i<e.length;i++)e[i]!==void 0&&(n+=`
                        <div class="detail-item">
                            <strong>Group ${i}:</strong>
                            <code>${this.escapeHtml(e[i])}</code>
                        </div>
                    `)}s.innerHTML=n}switchTab(e){document.querySelectorAll(".tab-btn").forEach(t=>{t.classList.toggle("active",t.dataset.tab===e)}),document.querySelectorAll(".tab-pane").forEach(t=>{t.classList.toggle("active",t.id===`${e}-tab`)})}toggleTheme(){const t=document.body.classList.toggle("light-theme"),s=document.querySelector("#theme-toggle i");t?(s.classList.replace("fa-moon","fa-sun"),g.setTheme("regex-light")):(s.classList.replace("fa-sun","fa-moon"),g.setTheme("regex-dark")),localStorage.setItem("theme",t?"light":"dark")}clearResults(){document.getElementById("match-count").textContent="0",document.getElementById("exec-time").textContent="0",document.getElementById("matches-list").innerHTML='<div class="no-matches">Keine Treffer</div>',this.currentDecorations&&this.testStringEditor&&this.testStringEditor.deltaDecorations&&(this.testStringEditor.deltaDecorations(this.currentDecorations,[]),this.currentDecorations=[])}setStatus(e,t="info"){const s=document.getElementById("status-message");s.textContent=e,s.className=`status-${t}`,setTimeout(()=>{s.textContent="Bereit",s.className=""},3e3)}saveState(){const e={regex:document.getElementById("regex-input").value,flags:document.getElementById("regex-flags").value,testString:this.testStringEditor?this.testStringEditor.getValue():"",flavor:document.getElementById("regex-flavor").value,substitution:document.getElementById("substitution-input").value,substitutionEnabled:document.getElementById("enable-substitution").checked};localStorage.setItem("regexAppState",JSON.stringify(e)),this.setStatus("Gespeichert!","success")}loadSavedState(){const e=localStorage.getItem("regexAppState");if(e)try{const t=JSON.parse(e);if(document.getElementById("regex-input").value=t.regex||"",document.getElementById("regex-flags").value=t.flags||"",this.testStringEditor&&(this.testStringEditor.setValue?this.testStringEditor.setValue(t.testString||""):document.getElementById("fallback-textarea")&&(document.getElementById("fallback-textarea").value=t.testString||"")),document.getElementById("regex-flavor").value=t.flavor||"javascript",document.getElementById("substitution-input").value=t.substitution||"",document.getElementById("enable-substitution").checked=t.substitutionEnabled||!1,t.substitutionEnabled){const s=document.getElementById("substitution-container");s&&(s.style.display="block")}this.updateFlagsAndProcess(),t.regex&&this.processRegex()}catch(t){console.error("Failed to load saved state:",t)}}updateUI(){localStorage.getItem("theme")==="light"&&this.toggleTheme()}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}}document.addEventListener("DOMContentLoaded",()=>{new v});
